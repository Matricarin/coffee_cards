# Техническое задание

**Проект:** Coffee Cards  
**Тип продукта:** мобильное приложение (iOS, Android) и веб-сервис  
**Назначение:** цифровые скидочные карточки для кофеен  

---

## 1. Введение
Проект направлен на замену бумажных скидочных карточек цифровыми аналогами.  
Приложение предоставляет клиентам удобный доступ к карточкам различных кофеен, а кофейням — инструмент для управления системой лояльности.  

---

## 2. Цели и задачи
### Цели:
- Снизить расходы кофеен на печать и распространение бумажных карт.  
- Повысить лояльность клиентов за счёт удобного цифрового кошелька.  
- Создать единый маркетинговый канал для кофеен.  
- Повысить экологичность за счёт отказа от бумаги/пластика.  

### Задачи:
- Реализовать мобильное приложение для клиентов.  
- Реализовать веб-кабинет для кофеен.  
- Организовать учёт покупок и автоматическое применение скидок.  
- Обеспечить безопасность и надёжное хранение данных.  

---

## 3. Пользователи системы
### 3.1. Клиенты
- Регистрируются в мобильном приложении.  
- Добавляют карточки кофеен в кошелёк.  
- Совершают покупки и получают скидки.  
- Получают уведомления о новых предложениях.  

### 3.2. Кофейни
- Регистрируются в веб-сервисе.  
- Управляют филиалами и карточками.  
- Анализируют статистику использования карточек.  
- Отправляют уведомления клиентам.  

### 3.3. Сотрудники (опционально)  
- Фиксируют продажи и применение карточек.  
- Могут иметь разные уровни доступа (кассир, менеджер, администратор).  

---

## 4. Сущности системы
- **Клиент** — владелец кошелька карточек.  
- **Кошелёк** — цифровое хранилище карточек клиента.  
- **Карточка** — скидка/бонусная программа кофейни (дизайн, условия, статус).  
- **Кофейня** — организация с личным кабинетом.  
- **Филиал** — отдельная точка продаж кофейни.  
- **Сотрудник** — пользователь с доступом к управлению карточками/продажами.  

---

## 5. Пользовательские сценарии (Use Cases)
### 5.1. Сценарии клиента
1. Регистрация и вход в приложение.  
2. Просмотр списка кофеен.  
3. Добавление карточки выбранной кофейни в кошелёк.  
4. Совершение покупки и автоматическое обновление карточки.  
5. Получение уведомления о скидке.  
6. Использование накопленной скидки.  

### 5.2. Сценарии кофейни
1. Регистрация и создание личного кабинета.  
2. Добавление филиалов.  
3. Создание карточек (условия, дизайн).  
4. Размещение карточек на витрине.  
5. Просмотр статистики по использованию карт.  
6. Отправка push-уведомлений клиентам.  

---

## 6. Функциональные требования
### 6.1. Клиентское приложение
- Регистрация/авторизация (email, телефон, соцсети).  
- Цифровой кошелёк для карточек.  
- Уведомления о скидках и бонусах.  
- Интеграция с системами оплаты (опционально).  
- История покупок и использования карт.  

### 6.2. Веб-сервис для кофеен
- Регистрация кофейни.  
- Управление филиалами.  
- Управление карточками (CRUD).  
- Просмотр статистики (кол-во пользователей, использование скидок).  
- Управление сотрудниками и их ролями.  

---

## 7. Нефункциональные требования
- **Мобильное приложение:** iOS (13+), Android (8+).  
- **Веб-сервис:** адаптивный интерфейс (desktop + mobile).  
- **Безопасность:** хранение паролей в хэшированном виде, JWT-авторизация, HTTPS.  
- **Персональные данные:** соответствие GDPR и 152-ФЗ.  
- **Производительность:** поддержка от 1000 кофеен и 100k клиентов на MVP.  
- **Масштабируемость:** возможность горизонтального масштабирования backend.  

---

## 8. Архитектура
- **Frontend:**  
  - Mobile: Flutter / React Native.  
  - Web: React.  
- **Backend:** ASP.NET Core (REST API, JWT, Swagger).  
- **База данных:** PostgreSQL (реляционные данные), Redis (кэш).  
- **Хранение медиа:** S3-совместимое хранилище (например, MinIO).  
- **Интеграции:** Firebase/OneSignal (уведомления).  

---

## 9. Модели данных (основные)
- **User (Клиент)**: Id, Имя, Email/Телефон, Список карточек.  
- **CoffeeShop (Кофейня)**: Id, Название, Логотип, Список филиалов.  
- **Branch (Филиал)**: Id, Адрес, Карточки.  
- **Card (Карточка)**: Id, Дизайн, Условия, Статус.  
- **Transaction (Покупка)**: Id, UserId, BranchId, Сумма, Дата.  

---

## 10. Вопросы и риски
- Как синхронизировать оплату и выполнение условий карточек?  
- Нужно ли участие сотрудника или интеграция с кассами/эквайрингом?  
- Как убедить кофейни подключиться к сервису (модель монетизации)?  
- Как хранить и обезопасить персональные данные клиентов и корпоративные данные кофеен? 

---

## 11. Возможные расширения
- Интеграция с Apple Pay/Google Pay.  
- Геймификация (уровни, бейджи, достижения).  
- Реферальная программа.  
- Интеграция с CRM кофеен.  
- API для сторонних сервисов доставки.  

---

## 12. Этапы реализации
1. **MVP**:  
   - Регистрация клиентов и кофеен.  
   - Кошелёк с карточками.  
   - Управление карточками в веб-кабинете.  
   - Базовые уведомления.  
2. **Релиз 2**:  
   - Интеграция с кассами.  
   - Расширенная статистика.  
   - Геймификация.  
3. **Релиз 3**:  
   - Интеграция с платёжными системами.  
   - Реферальная система.  
   - API для партнеров.  

---

## 13. Метрики успеха
- Количество активных кофеен.  
- Количество активных клиентов.  
- Среднее использование карточек (раз в неделю/месяц).  
- Уровень удержания клиентов (retention rate).  
